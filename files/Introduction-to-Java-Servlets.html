<!DOCTYPE html>

<head>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">

<meta name="description" content="Rick Delpo, Data Professional offering FREE Java and SQL tutorials for the absolute beginner. FREE Java and SQL tutorials, and introduction to Web development">

<meta name="keywords" content="rick delpo,cloud computing, CT, Connecticut, learn java,sql,data management,cloud instruction, tutoring, learn sql, data integration, data instruction,consulting, education, mentoring">



<title>Rick Delpo</title>
  

<!--these are the local links-->
            <script src="jquery-3.4.1.js"></script> <!--grab this locally-->
            <script src="popper.js"></script> <!--must be in this order - need popper to make pop up work-->
          <!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>-->

            <script src = "bootstrap-4.1.1.js"></script> 
            <link rel = "stylesheet" href = "bootstrap-4.1.1.css">


           <!-- <link rel="stylesheet" href="font-awesome.css"> --> <!-- not using FA anymore due to manual x to close in navbar -->
          <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css"> -->



            <link rel="canonical" href="https://www.cloudwithasilverlining.com"/>

                  <!--add ref to favicon-->

            <link rel="icon" href="data.ico" type="image/x-icon"> <!-- create one and save it, done -->

  

<style>

.toshow {

display:none; /* default is hidden, this also hides the space it takes up vs visibility tag that only hides content but not the space */
top:0;
position:fixed; /*this makes banner fixed but navbar is not..now it is fixed by changing position on nav when reset */
padding-bottom: 30px; /* need this to cover white space when no word wrap, this works only for mobile to cover white space when phone is turned horizontal */

}

.main {
   padding-top: 300px;  /* start content 280 px from top but move content up 160 px when in mobile mode with smaller banner */
   padding-bottom: 50px; /* added white space at end of div to create more space between divs, avoid overlap */
}


           /* start the nav bar right below the header at position 161 */
.navbar {
        top: 161px;
          /* looks like navbar has a default height of maybe 54 px */
    } 


    
       /* pagewide is start of banner section above navbar, it is 160px wide */
.pagewide {


      /*  we are only using this class now because it gets destroyed for mobile version */
     

           }



.site-footer {
    background: orange;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    height: 70px;

}

/* ditch the ugly blue outline */
.navbar-toggler:focus,
.navbar-toggler:active {
    outline: 0;
}

/* hide, close when burger shown */
.navbar-toggler.collapsed .close-icon {
    display: none;
}

.navbar-toggler:not(.collapsed) .navbar-toggler-icon {
    display: inline;
}


/* below is css from tut 2 */

p.indent {

  font-size: 17px;
  font-weight: normal;
  color: red;
  width: 70%;  /*content takes up 50% of screen width, then below centers it */
  margin-left: auto ; 
  margin-right: auto ;


}


   /* need to have all elements (divs and images) in body with these default props for screens/viewports < 1100 px */
body {
  background-color: #FFF8DC;
  padding: 5px;
 /* font-weight: bold; */
  line-height:40px;
 
}


     /* for screens  > 1100px center all body content and elements */
@media only screen and (min-width: 1100px) {
  body {

    background-color: lightgray;

 width: 65%;  /*all body content takes up 65% of screen width, then below margin property centers it */
  margin-left: auto ; 
  margin-right: auto ;

font-family: Avenir;
  font-size: 18px;
/*  font-weight: bold; */
  line-height:40px;

  }
}


 
</style>



<script>

var eu;
var session;

$.ajax({
  url: "https://geolocation-db.com/jsonp",
  jsonpCallback: "callback",
  //async: false, //does not work in jsonp, this is ignored by jsonp
  dataType: "jsonp",
  success: function(location) {
      //grab stats into variables, country,state and city_name
 country=location.country_name;
 state=location.state;
 city_name=location.city;

       //need this logic here while still in success function..still need to do this for 28 countries in eu

//if(state=="California") {        }
               if(country=="United Kingdom"||country=="France"||country=="Germany"||country=="Austria"||country=="Belgium"||country=="Bulgaria"||country=="Croatia"||country=="Cyprus"||country=="Czechia"||country=="Denmark"||country=="Estonia"||country=="Finland"||country=="Greece"||country=="Hungary"||country=="Ireland"||country=="Italy"||country=="Latvia"||country=="Lithuania"||country=="Luxembourg"||country=="Malta"||country=="Netherlands"||country=="Poland"||country=="Portugal"||country=="Romania"||country=="Slovakia"||country=="Slovenia"||country=="Spain"||country=="Sweden") {

//if(country=="United States") {
              
    //alert("is eu");  //this is working
    //var eu = "yes";  //i think we should not use var because not using ensures that var created is global...need to try this
     eu = "eu yes";
}


  } //end success...i think success is replaced by done in later jquery versions and use promises instead of async:false to synchronize calls ...seems complicated
      //async:false is deprecated so at a later date we will need to replace


});

  //geo info is now in the head tag so it loads before body
      

$.ajax({
                method: "GET",
                url: "https://javasqlweb.org/test.php",
                dataType:'text',
                success : function(response){
                     session = response;

                }
            });


</script>


</head>



<!--<body>-->
<body onLoad="closePage();">



<script>
 
function closePage(){

var name;  //this will be the session id
var count;  //if var is string must have single quotes, otherwise no quotes for int
var pg;
var responseText;     

pg="tut2"; //this sets home page and adds unload listener, ajax below identifies page after click but has no unload for those
count=1;
name = "test new";

$.ajax({
           
url     : 'https://javasqlweb.org/examples/servlets/servlet/AjaxHandler3',
method     : 'POST',
async: false,
data : {   name : name,  name1 : count, page2:pg, country2 : country, state2:state, city2:city_name, eu2:eu, session2:session }, 
success    : function(response){
      responseText = response;  //pass this session to timeout servlet, this post allows 1 callback which is a get response object from servlet
      //$('#result').html(response); //getting session id back from ajaxhandler3 response object
   },
error : function(jqXHR, exception){console.log('Error occured!!'); }

});  //end of ajax function


window.addEventListener('unload', function(event) {

fetch("https://javasqlweb.org/examples/servlets/servlet/TimeOut", {
     method: 'POST',
     headers: new Headers({
             'Content-Type': 'application/x-www-form-urlencoded', // <-- Specifying the Content-Type..headers required for param to work
    }),
     body: "name111="+responseText,  //from above..need comma because we are also adding keepalive..name111 is the param we get in servlet
     keepalive: true  //required for window unload
})
    .then(res => res.text()) //this is the promise fka callback..not being used for this post request but needs to be used in get
    .then((out) => {
       // console.log('Output: ', out);
}).catch(err => console.error(err));

               
});  //end of window unload
 

} //end of closePage function


</script>


      <!-- start of banner followed by navbar -->

<div class="container-fluid">


   <div class="pagewide float-left bg-info fixed-top" <!--style="padding-right: 150px;-->"> <!--using pagewide only for destruction of this class on resize-->
                                <!-- was bg-success which is color green and info is color blue -->
<span class="float-left p-2">
 <h2>JavaSQLWeb - fka Cloudwithasilverlining</h2>
<p>go from zero to hero with my FREE  <a href="free-tutorials" onclick='setThrough(this);' target="receiver3" style="color:red">Java Tutorials </a>  </p> 

<!--<p>click here for tutorials.....also include image to the right....and feedback section at bottom</p> -->
<p>we are under construction so some links are not working right now</p>
</span>

     <span class="float-right pr-5"><img alt="main logo" src="data2.jpg"> </span>
   </div> 



</div> <!-- end container div-->




         <!-- this div is hidden by default along with the space it takes up, and is the alt banner above the navbar when in mobile mode -->
<!--<div class="toshow bg-primary fixed-top"> sample div, this is an example of a simple banner above navbar to be used only when in mobil and by default is hidden</div>-->

<div class="toshow bg-info fixed-top"> click here for - FREE Java Tutorials....also note that we are under construction so some links may not be working</div>
                      <!-- need fixed top here -->


     <!--this is the nav bar, the name as nav is referred to in jquery to reposition the navbar for mobile-->
<nav class="navbar fixed-top navbar-expand-md navbar-dark bg-dark"> <!--a fixed top starting at top=160px below banner div-->
    <div class="container">
        <a class="navbar-brand" href="#" target="_self">
            JavaSQLWeb.org    <!--formerly Cloudwithasilverlining -->
        </a>


<!-- this is the new button with x to close, see older file for other , for this we use font awsome x because glyphicon went away in bootstrap4  -->
 <button class="navbar-toggler collapsed border-0" type="button" data-toggle="collapse" data-target="#collapsingNavbar">menu
            <span class="navbar-toggler-icon"></span>

      <!--  <div class="close-icon py-1"><i class="fa fa-times"></i></div> -->
 <div class="close-icon py-1">x</div>    <!-- use plain x instead of fa -->

         
        </button>


<!--menu section-->

 <div class="collapse navbar-collapse" id="collapsingNavbar"> <!--this line needed for x to work in bootstrap4 -->

            <ul class="navbar-nav ml-auto">

                <li class="nav-item active">
                  <!--  <a class="nav-link" href="&lt;?= $this-&gt;basePath('inloggen') ?&gt;">Inloggen<span class="sr-only">(current)</span></a> -->
                    <a class="nav-link" href="https://javasqlweb.org">Home <span class="sr-only">(current)</span></a>
                </li>

                <li class="nav-item">
                  <!-- <a class="nav-link" href="about -rev1">About</a> -->
                   <!--    <a class="nav-link" href='about' onclick='setThrough(this);' target="receiver3">About</a> -->
         <!-- need collapse.show syntax so menu collapses after item is selected, do this for other menu links -->
            <!-- the .show method replaces .in method which makes this work only on mobile device...collapse is for mobile only -->
 <a class="nav-link" href='about' onclick='setThrough(this);' target="receiver3" data-toggle="collapse" data-target=".navbar-collapse.show">About</a>             
                       <!-- then go to set through this script and reposition content up 100 px for mobile only after collapse -->

                </li>

             <!--
                <li class="nav-item">
                   <a class="nav-link" href="#">Features</a>
                </li>
              -->

                <li class="nav-item">
                  <!-- <a class="nav-link" href="free-tutorials">Free Tutorials</a>-->
                       <a class="nav-link" href='free-tutorials' onclick='setThrough(this);' target="receiver3" data-toggle="collapse" data-target=".navbar-collapse.show">Free Tutorials</a>


                </li>

                <li class="nav-item">
                   <a class="nav-link" href="comments" onclick='setThrough(this);' target="receiver3" data-toggle="collapse" data-target=".navbar-collapse.show">Submit Comment</a> <!-- put feedback form here -->
                </li>

      <li class="nav-item dropdown"> <!--alternative to hamburger menu, but for small screens turns into hamburger, see button tag above-->
        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">More
        </a>
        <div class="dropdown-menu dropdown-info" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="contact" onclick='setThrough(this);' target="receiver3" data-toggle="collapse" data-target=".navbar-collapse.show">contact us</a>
          <a class="dropdown-item" href="pricing" onclick='setThrough(this);' target="receiver3" data-toggle="collapse" data-target=".navbar-collapse.show">Pricing</a>
          <!--<a class="dropdown-item" href="#">Privacy Policy</a>-->
   <a class="dropdown-item" href="privacy" onclick='setThrough(this);' target="receiver3" data-toggle="collapse" data-target=".navbar-collapse.show">Privacy Policy</a>    
        </div>
      </li>


            </ul>

        </div>
    </div>
</nav>






        <!-- this is my main content and id tag makes div move in jquery when navbar repositions for smaller screen -->

  <div class="main" id="movediv">

<h1>How to Create and Run a Simple Java Program in Eclipse</h1>
<br>
<h1>Introduction to Java Servlets - Part 2</h1>

<br>
 
<div>

<p>Before reviewing this tutorial be sure to have the proper Java environment set up, as we learned how to do in 

<a href="https://www.cloudwithasilverlining.com/training/get-started-with-eclipse" target="_self">my previous tutorial</a>
. Also I am recommending that you enhance your experience by doing a lot of independent research out on Google, in addition to what I am showing you here.</p>



<p>&nbsp;</p>

<p>Before getting started on writing a program we need to create a project in Eclipse. Here is what my Workspace looks like. In the package explorer I have 3 projects set up. The one called test is what we will work on. We will write code in our workspace for the Hello.java file.</p>

        <!-- in jdk3 we needed / in front of /images/path and .JPG vs .jpg  I think for mobile is different -->

<br><br>
<img alt="workspace";  src="images/workspace.jpg" class="img-fluid"/>
<br><br>
</div>



<div>

<p>So let&rsquo;s now create a project. Right click anywhere inside Package Explorer and choose new. We will see this first</p>
<br>

<img alt="new project";  src="images/new project.jpg" class="img-fluid"/>
<br><br>

</div>



<div>

<p>then press java project or just press file then new then java project.</p>
<p>then we will see this next</p>

<br><br>
<img alt="create java project";  src="images/create java project.jpg" class="img-fluid"/>
<br><br>

</div>




<div>

<p>Fill in a name for the project, keep all else the same on the form and press finish. Next, expand the project folder to view all sub folders in the project, right click on src (this&nbsp;means source files), then choose new and then Class and press enter. This form will come up</p>

<br><br>
<img alt="create class";  src="images/create class.jpg" class="img-fluid"/>
<br><br>

</div>




<div>

<p>Here we are creating a class object where we will write our code. It is good practice (but not mandatory) to include a package name because we can have multiple classes in a package. Also a class name is mandatory. I chose the package name as test and for the class name please fill in as Hello&nbsp;and we do not need to include .java at the end of the name.Then check the box that says &lsquo;public static void main&rsquo; and press Finish. Main(String args) is also referred to as the main method and we must have this inside our Main class object in order to run this class in Eclipse.</p>

<p>After Pressing Finish we have now created our Hello.java class and the minimal code will show up in our workspace. If we close the class by xing out of it then we can double click it in package explorer later and the code will reappear in our workspace. As we go along and create more complicated classes it will be okay if you copy and paste the code that I provide in a given tutorial. Right now we just want to get up and running.</p>

<p>Let us now understand the structure of our newly created class. Inside our public class named Hello we have one method called the main method. And inside this method we are asking the program to print out the phrase Hello World to our console.</p>

<p>Now let&rsquo;s run the program. Be sure that the file is saved, press file save. Then right click on Hello.java in the package explorer and choose run as and then java application</p>

<br><br>
<img alt="run as java app";  src="images/run as java app.jpg" class="img-fluid"/>
<br><br>

</div>




<div>

<p>Look down below in the console and we will see Hello World.</p>

<br><br>
<img alt="console view";  src="images/console view.jpg" class="img-fluid"/>
<br><br>

</div>



<div>

<p>By now I am sure we have many more questions. My teaching methodology is to teach all the shortcuts so we can fast track our learning process. It is up to you to do homework and research any details about the process or things I may have inadvertently left out. I am only providing the basics. It is also okay to message me on facebook for quick questions.</p>

<p>&nbsp;</p>

<p>Most tutorials leave you hanging at this point after creating the Hello World application. What to do next? We have just created a main class and ran it as a java application. This main class is also known as a POJO or plain old java object and we will use many of these types of classes along the way when building larger applications.
</p>

<p>&nbsp;</p>

<p>PART 2 -&nbsp;now I want to show another type of class we need to learn about. This is the servlet class. By understanding both types of classes up front, main (plain class) and servlet (web class), we can move from a POJO to a web application with servlet architecture. From my experience we can&rsquo;t do much with POJOs in the beginning without lots of education. So I move right into Servlets because this way we can do web apps early on in our learning process. Take my word for it for now, because it is much more fun to work with servlets in my opinion. We can do more things as beginners sooner rather than later and thus keep our curiosity and interest going. Warning, it is very easy to give up on java, I did it many times, but rest assured it is worth it to keep plugging along.</p>

<p>&nbsp;</p>

<p>Back to the Servlet class. But first, we are not set up to do servlets yet in this version of eclipse. We will need to start a new project and choose dynamic web project but as of now that choice is not available to us. So lets enable eclipse to do this</p>


<p class="indent">Please be advised that since I originally wrote this piece, that u may want to choose the most recent version of eclipse from the downloads section and also u may want to download the J2EE version so u don't have to modify the current version as described in these next steps.</p>




<p>Above our workspace Press help then install new software</p>

<br><br>
<img alt="install new software";  src="images/install new software.jpg" class="img-fluid"/>
<br><br>

</div>





<div>

<p>In the 'work with' area delete what is there &amp; copy and paste this:</p>


<p><object height="0"><a class="auto-generated-link" data-auto-recognition="true" data-content="http://download.eclipse.org/releases/luna" href="http://download.eclipse.org/releases/luna" target="_blank" data-type="external">http://download.eclipse.org/releases/luna</a></object></p>


<p>then press enter</p>


<p>then you will see that the program is pending..just wait patiently</p>

<br><br>
<img alt="install 2 jpg";  src="images/install2.jpg" class="img-fluid"/>
<br><br>

</div>




<div>

<p>then we&nbsp;see this</p>

<br><br>
<img alt="install 3 jpg";  src="images/install3.jpg" class="img-fluid"/>
<br><br>

</div>




<div>

<p>check the last box for Web, XML, Java EE. Here we are choosing to install only web enabled&nbsp;components so Eclipse will then be able to create a web app. It may take several minutes to load all the necessary components. We will see this:</p>

<br><br>
<img alt="calculating req 2.JPG";  src="images/calculating req 2.jpg" class="img-fluid"/>
<br><br>

</div>





<div>

<p>Don&#39;t worry if you see &#39;cannot perform operation&#39;, it will still load what we need. Then after a few minutes we see this next</p>

<br><br>
<img alt="install page";  src="images/install page.jpg" class="img-fluid"/>
<br><br>

</div>





<div>

<p>We are wanting mainly web developer tools and java EE...press next twice then review license and accept terms and click finish..it could now take up to 5 minutes to install. In lower right hand corner we will see this:</p>

<br><br>
<img alt="installing2.JPG";  src="images/installing2.jpg" class="img-fluid"/>
<br><br>

</div>



<div>

<p class="indent">This is the end of the install instructions that u can skip by downloading the j2ee version of eclipse</p>

<p>When finished installing we will need to restart Eclipse and then all our web tools will be available to start our Servlet Web Application....So we will need to create a new project. This time&nbsp;choose file new then other, then open the web folder and choose dynamic web project</p>

<br><br>
<img alt="dynamic web project";  src="images/dynamic web project.jpg" class="img-fluid"/>
<br><br>

</div>




<div>

<p>After clicking dynamic web project we are going to have to name the project and choose a target runtime to run the project in. For this we need to 

<a href="https://tomcat.apache.org/download-80.cgi" target="_blank" data-content="https://tomcat.apache.org/download-80.cgi" data-type="external" rel="undefined">download Tomcat binary&nbsp;core version
</a> and configure tomcat8 to run the Servlet project. So for project name input Servlet Example as shown and then hit new runtime and choose Apache Tomcat v 8.5. This part will not work until after downloading and extracting the tomcat zip file into a target folder which we reference in this&nbsp;configuration.

</p>

<br><br>
<img alt="dynamic project runtime";  src="images/dynamic project runtime.jpg" class="img-fluid"/>
<br><br>

</div>





<div>

<p>This part might be a bit complicated so bear with me. Open the tomcat 8 folder and then choose the tomcat 8 sub folder for your runtime environment. Browse for the tomcat installation directory and choose this sub folder</p>

<br><br>
<img alt="dynamic tomcat 8";  src="images/dynamic tomcat 8.jpg" class="img-fluid"/>
<br><br>


</div>





<div>

<p>As we navigate through the process we see this notice. Click on open perspective and now we are ready to program a servlet class</p>

<br><br>
<img alt="dynamic open perspective";  src="images/dynamic open perspective.jpg" class="img-fluid"/>
<br><br>


</div>





<div>

<p>now we can see in upper right hand corner of our workspace that we have the Java perspective that we used for plain java and we jave the JavaEE perspective for web apps. So be sure you click on the right perspective for what you are working on. I have a third one here for Python which we will touch in another tutorial</p>


<br><br>
<img alt="perspectives";  src="images/perspectives.jpg" class="img-fluid"/>
<br><br>


</div>





<div>

<p>While creating our project be careful to press all the next buttons in the process. As you press next check create deployment descriptor web xml before clicking on Finish. Going back to our project explorer we now have our Servlet project ready to go using web dev components and in the Java EE perspective</p>


<br><br>
<img alt="servlet structure2";  src="images/servlet structure2.jpg" class="img-fluid"/>
<br><br>

</div>






<div>
<p>To build the servlet class we will use the same process we used previously to build our main class. Right click on src then select new but this time choose Servlet instead of Class. This screen will become visible</p>

<br><br>
<img alt="create servlet";  src="images/create servlet.jpg" class="img-fluid"/>
<br><br>

</div>






<div>

<p>Once again&nbsp; use test as package and Hello as Class name. Then click next</p>

<br><br>
<img alt="create servlet2";  src="images/create servlet 2.jpg" class="img-fluid"/>
<br><br>


</div>




<div>

<p>uncheck Constructors from superclass, doPost, doGet and check service, then click finish. Here is what we see in our workspace. Do a file save and now we can tweek this code and run it</p>

<br><br>
<img alt="create servlet4";  src="images/create servlet 4.jpg" class="img-fluid"/>
<br><br>


</div>




<div>

<p>One last thing before running our servlet. Double click on web.xml file, click the source tab and copy the following html tags into the file right before the closing /web-app tag, save the file and close it. We have just mapped our servlet to the web app. Don&#39;t forget to do this whenever creating additional servlets</p>


<p>&lt;servlet&gt; &nbsp; &nbsp;<br />
&nbsp; &nbsp; &lt;servlet-name&gt;Hello&lt;/servlet-name&gt;<br />
&nbsp; &nbsp; &lt;servlet-class&gt;test.Hello&lt;/servlet-class&gt;<br />
&nbsp; &lt;/servlet&gt;<br />
&nbsp; &lt;servlet-mapping&gt;<br />
&nbsp; &nbsp; &lt;servlet-name&gt;Hello&lt;/servlet-name&gt;<br />
&nbsp; &nbsp; &lt;url-pattern&gt;/Hello&lt;/url-pattern&gt;<br />
&nbsp; &lt;/servlet-mapping&gt;</p>



<p>the completed web xml file should look like this:</p>

<br><br>
<img alt="web xml";  src="images/web xml.jpg" class="img-fluid"/>
<br><br>


</div>



<div>

<p>I added some code to my service method then resaved the file. Now we are finally ready to run the servlet</p>


<p>protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// TODO Auto-generated method stub<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// we will enter some code here and the run the servlet<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; //just do something simple like this<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;System.out.println(&quot;Hello World&quot;);<br />
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;<br />
&nbsp;&nbsp; &nbsp;}</p>



<p>Right click on Hello.java, then run as, then run on server. The tomcat server will run this web app and your display will be on http://localhost:8080/Servlet_Example/Hello in your browser. Previously our POJO ran as a java&nbsp;application but this servlet runs as a web application on a real webserver currently at localhost. Now u can also open ur Google Chrome browser while Tomcat is still running and paste the above http address right into the browser to verify that it runs outside of tomcat.</p>



<p>A quick note: this class will not run properly as is, so comment out the following&nbsp;line by placing 2 slashes before the line...then re save file and re run class and it will work</p>

<p>//@WebServlet(&quot;/Hello&quot;)</p>


<p>This is it for now

<a href="https://www.cloudwithasilverlining.com" target="_self">click here
</a> to exit. But remember that Servlets are a VERY important part of Java to know about. They pop up frequently in your travels.&nbsp;

</p>

</div>




 <br>

  </div>





<!-- selected content shows up in this div-->
<div class="main" id ="content"> </div>

<br>

       <!--changed default of iframe to be hidden-->
<iframe name="receiver3" id="receiver3" style="display:none;"></iframe>


     <script>  <!-- page views show up in content section with template header and navbar -->

//closeNew();  //tried this and close new was undefined because it was not inside set through function probably

      //Your variable declaration
    var yourVariable3;
   var responseText2;
var check = false;  //set boolean here initially as false, might need to set on body onload instead
                       //on first pass through close new var check is false so it does not fire unload script


      //Your function to set the value of your variable through href link clicked

    function setThrough(yourLink){

      //********************************* put this one back when live
closeNew(); //run this in beginning of pass so it picks up old session val to update on second pass
               //as content is changed run timeout servlet to grab previous page timeout...also has alert content changed
               //do this for each pass except first pass where check boolean is still false
//var pg;
         yourVariable3 = yourLink.href;  //get val of href
//alert("in first function");
//alert(yourVariable3);
if(yourVariable3=="https://javasqlweb.org/about") {var newvar="about";}
if(yourVariable3=="https://javasqlweb.org/free-tutorials") {var newvar="tutorials";}
if(yourVariable3=="https://javasqlweb.org/personality-of-the-beginner-programmer") {var newvar="personality";}
if(yourVariable3=="https://javasqlweb.org/afraid-of-java") {var newvar="afraid";}
if(yourVariable3=="https://javasqlweb.org/comments") {var newvar="comments";}
if(yourVariable3=="https://javasqlweb.org/privacy") {var newvar="privacy";}
if(yourVariable3=="https://javasqlweb.org/contact") {var newvar="contact";}
if(yourVariable3=="https://javasqlweb.org/pricing") {var newvar="pricing";}


//alert(newvar);  //this is the page variable we want to set based on reading the href object

$("#receiver3").hide(); //need this when using target iframe so content does not appear in 2 places..hide iframe
$("#movediv").hide();
$("#content").load(yourVariable3);  //load each href click into the content tag


name = "test new2";  //this will be the session id
count=1;  //if var is string must have single quotes, otherwise no quotes for int
pg=newvar;  // set page variable to our new var
//var responseText2;     

//closeNew(); //originally ran this here
               //then after close new, check if true or false, is run get new session below as response2

$.ajax({
           //pass each pageview into tracker table
url     : 'https://javasqlweb.org/examples/servlets/servlet/AjaxHandler3',
method     : 'POST',
//async: false,  //I turned this off, not sure if it had anything to do with updating, ie when this ajax is fired
data : {   name : name,  name1 : count, page2:pg, country2 : country, state2:state, city2:city_name, eu2:eu, session2:session }, 
success    : function(response){
      responseText2 = response;  //pass this session to timeout servlet, this post allows 1 callback which is a get response object from servlet
     },
error : function(jqXHR, exception){console.log('Error occured!!'); }

});  //end of ajax function


    } //end of set through function

</script>




<!-- end of main -->



<footer class="site-footer">
  This site does not use cookies.

<button id="btnClick">ok thanks</button> 

<span> click here for privacy 
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#demo2">
    policy
  </button>

<!-- include an if clicked function to push click event to db -->

</span>

<!-- need to also add copywrite info -->
<!-- perhaps if eu= yes we have site-footer2, a different looking footer just for eu??? -->


<!-- Button to Open the Modal, i think old window.open is no longer allowed in js, need to research this, so instead do pure css approach using bootstrap4 -->
      <!--note that close button was not working so i added some jquery and it worked -->

</footer>


  
<!-- popup section --> 
  <div class="modal" id="demo2">
 
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">   
   
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Privacy Policy</h4>
             <button type="button" class="close" data-dismiss="modal">X</button></div>
 
        <!-- Modal body -->
        <div class="modal-body">

<p>In general, we respect the privacy of our users.</p>
<br><br>
<p>We do not collect personal information, we do not market or retarget our products.
 We do not solicit or ask for an email address. We do not sell or share data.
 In fact, we are not even a business but instead an educational resource offering free tutorials.
 Thus, there is no impact on privacy whatsoever at this site. Also We do not buy personal data.</p>


             </div>   
    
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" > Close</button>
        </div>    
    
      </div>
    </div>
  </div>
  
</div>
<br><br>
<br><br>

<!-- end of popup-->







  <!-- other jQuery -->
 
    <script>
        $(document).ready(function() {   

            //default position large screen we have large banner above navbar but on <1000 screen we destroy class and run new navbar under default hidden div
               //no need for if and else just do below on mobile and anything >1000 becomes larger screen default
               //increased size to >1000 for this to work in firefox, originally at 800 was not working in FF
  
  function checkWidth() {
        var windowsize = $(window).width();
        if (windowsize < 1100) {

  $(".pagewide").hide(); 
    $(".col2").hide();
$("div").removeClass("pagewide"); 
$("div").removeClass("col2");


// new navbar re positioning, instantiate new div called nav using navbae class..75 is the height of mobile banner above navbar 
$("nav").css({top: 75, left: 0, position:'fixed'}); //this works for fixed, similar to fixed-top above, but this is the css way of doing it

$("div.toshow").show(); // this shows a more simple banner above the menu just for mobil use


// then mov whole div of main class up, trying to float a div on re position was not working


$('#movediv').animate({
		'marginTop' : "-=160px" //moves up 160 px for smaller banner on mobile
		});


//put else back in here for larger screen in order to center main content and images, see tut2 rev 2a
//need to have this jquery on all pages, tut 2a is still trying to use @media instead of this jquery

}


    }

    // Execute this function on load
    checkWidth();




//footer button click events
    //need to add if eu==yes then show footer....also add 28 eu countries above for eu column  in db
            // for this to work, default footer needs to hide similar to .toshow class



$(document).on('click', '#btnClick', function(){ 
    //alert("button is clicked"); // instead of alert add clicked event to db
    $(".site-footer").hide(); 
   
});

       // privacy policy click event , use this instead of modal, inside click event use if clicked lingo
$(document).on('click', '#btnClickPolicy', function(){ 
    alert(" other button is clicked"); // instead of alert add clicked event to db
    //$(".site-footer").hide(); 
   
});

  



}); //end of document ready


      </script>



<script>
 
function closeNew(){
    //on first pass var is false so below will not run but on next pass and subsequent will run
  //on next pass old response2 val is used before new one is assigned, maybe we still need fetch because i turned off async false in ajax

if (check){
 //add listener to div tag content when content is changed, originally used .on now using .one, so event handler only fires once
    //prior to this .on method registered handler each time and caused out of memory in db with semi infinite loop 
$("body").one('DOMSubtreeModified', "#content", function() {
    //alert("content changed");

     //ajax update timeout here, response2 val is the old one to close previous page on unload...this one closes when href clicked

fetch("https://javasqlweb.org/examples/servlets/servlet/TimeOut", {
     method: 'POST',
     headers: new Headers({
             'Content-Type': 'application/x-www-form-urlencoded', // <-- Specifying the Content-Type..headers required for param to work
    }),
     body: "name111="+responseText2,  //from above..need comma because we are also adding keepalive..name111 is the param we get in servlet
    // keepalive: true  //required for window unload
})
    .then(res => res.text()) //this is the promise fka callback..not being used for this post request but needs to be used in get
    .then((out) => {
       // console.log('Output: ', out);
}).catch(err => console.error(err));


}); //end of content changed function
  }                                       

check=true;

} //end of closeNew function


</script>





</body>
</html>






